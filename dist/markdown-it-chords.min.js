!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).markdownItChords=e()}}(function(){return function(){return function e(t,n,r){function o(p,u){if(!n[p]){if(!t[p]){var c="function"==typeof require&&require;if(!u&&c)return c(p,!0);if(s)return s(p,!0);var i=new Error("Cannot find module '"+p+"'");throw i.code="MODULE_NOT_FOUND",i}var a=n[p]={exports:{}};t[p][0].call(a.exports,function(e){return o(t[p][1][e]||e)},a,a.exports,e,t,n,r)}return n[p].exports}for(var s="function"==typeof require&&require,p=0;p<r.length;p++)o(r[p]);return o}}()({1:[function(e,t,n){"use strict";const r=/^\[[A-G][b#\u266d\u266f]*(?:M|\u0394|[Mm]aj|m|[Mm]in|-|\u2013|[Dd]im|o|\xb0|\xf8|[Aa]ug|\+|[Ss]usp?|[Aa]dd)?(?:1?[\d])?(?:(?:[\(\/,]?(?:[-\u2013+\u0394ob#\u266d\u266f]|[Mm]aj|[Mm]in|[Ss]usp?)?[0-9]+\)?)*)?(?:\/[A-G][b#\u266d\u266f]*)?(?:\|[XxOo\d,\(\)]{3,})?\]/,o=/^\[([A-G])([\u266d\u266f]*)(M|\u0394|[Mm]aj|m|[Mm]in|\u2011|[Dd]im|\xb0|\xf8|[Aa]ug|\+|[Ss]usp?|[Aa]dd)?(1?[\d])?((?:[\(\/,]?(?:[\u2011+\u0394\xb0\u266d\u266f]|[Mm]aj|[Mm]in|[Ss]usp?)?[0-9]+\)?)*)?(\/[A-G][\u266d\u266f]*)?(\|[XxOo\d,\(\)]{3,})?\]/,s=/(?:[\(\/,1]*(?:[\u2011+\u0394\xb0\u266d\u266f]|[Mm]aj|[Mm]in|[Ss]usp?)?[02-9]+\)?)*/,p=/^\[(?:[XxOo\d,\(\)]{3,})\]/;function u(e,t){let n,u,i,a,h,d,f,l,m=e.pos;return 91===e.src.charCodeAt(m)&&(!!(n=e.src.slice(m)).length&&((u=n.match(r))?(a=((i=u[0].split("|"))[0]+"]").replace(/b/g,"\u266d").replace(/#/g,"\u266f").replace(/o/g,"\xb0").replace(/[-\u2013]/g,"\u2011").match(o),h=c(i[1])):h=c((u=n.match(p)||[""])[0]),!(!a&&!h)&&(l=a?"chord":"chord diagram",t||((f=e.push("chord_open","span",1)).attrs=[["class",l]],(f=e.push("chord_inner_open","span",1)).attrs=[["class","inner"]],a&&(d=!!a[5]&&a[5].match(s),(f=e.push("chord_i_open","i",1)).attrs=[["class","name"]],(f=e.push("text","",0)).content=a[1],a[2]&&(f.content+=a[2]),"\xf8"===a[3]?(e.push("sup_open","sup",1),(f=e.push("text","",0)).content="\xf8",e.push("sup_close","sup",-1)):a[3]&&(f.content+=a[3]),a[4]&&(e.push("sup_open","sup",1),(f=e.push("text","",0)).content=a[4],e.push("sup_close","sup",-1)),d&&d.forEach(t=>{e.push("sup_open","sup",1),(f=e.push("text","",0)).content=t,e.push("sup_close","sup",-1)}),a[6]&&((f=e.push("text","",0)).content=a[6]),f=e.push("chord_i_close","i",-1)),h&&h.length&&((f=e.push("chord_i_open","i",1)).attrs=[["class","diagram"]],h.forEach(t=>{(f=e.push("text","",0)).content=t,e.push("br","br",0)}),f=e.push("chord_i_close","i",-1)),f=e.push("chord_inner_close","span",-1),f=e.push("chord_close","span",-1)),e.pos+=u[0].length,!0)))}function c(e){if(!e)return!1;const t=String.fromCharCode(822),n=String.fromCharCode(160),r=String.fromCharCode(9679),o=String.fromCharCode(9675);let s,p,u,c,i=99,a=0,h="",d=[];return e=e.replace(/[\[\]|]/g,"").replace(/[Oo]/g,"0"),(e=/,/.test(e)?e.split(","):e.match(/\(?[XxOo\d]\)?/g)).reverse(),e=e.map(e=>((s=parseInt(e.replace(/[\(\)]/g,"")))&&s<i&&(i=s),s&&s>a&&(a=s),u=isNaN(s)?"x":s?/\(/.test(e)?o:r:n,{fret:s||0,char:u})),a<=4&&(i=1),a-i<2&&a++,i>1&&(d.push(`${n}${i}`),h=t),e.forEach((r,o)=>{p=o&&o<e.length-1,c="x"===r.char?"x":n,c+=`${p?"|":n}${h}`;for(let e=i;e<=a;e++)c+=e===r.fret?r.char:`${n}${t}`,c+=`${p?"|":n}${t}`;d.push(`${c}`)}),d}t.exports=function(e){e.inline.ruler.push("chords",u)}},{}]},{},[1])(1)});
